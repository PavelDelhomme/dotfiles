# DESC: Liste les ports en Ã©coute sur le systÃ¨me
# USAGE: list_ports
function list_ports() {
    echo "ğŸ“¡ Liste des ports en Ã©coute sur le systÃ¨me..."
    
    if sudo -v; then
        local result=$(sudo lsof -i -P -n | grep LISTEN | 
                       awk '{sub(/.*:/, "", $9); printf "%-7s|%-12s|%-10s|%-12s\n", $9, substr($1,1,12), $2, substr($3,1,12)}' | 
                       sort -n)
        
        if [ -n "$result" ]; then
            local header="PORT   |COMMAND     |PID       |USER        "
            local separator="â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
            
            echo "â”Œ${separator/â”¼/â”¬}â”"
            echo "â”‚${header}â”‚"
            echo "â”œ${separator}â”¤"
            echo "$result" | sed 's/^/â”‚/' | sed 's/$/â”‚/' | sed 's/|/â”‚/g'
            echo "â””${separator/â”¼/â”´}â”˜"
        else
            echo "Aucun port en Ã©coute trouvÃ©."
        fi
    else
        echo "âŒ Impossible d'obtenir les privilÃ¨ges sudo. OpÃ©ration annulÃ©e."
    fi
}

