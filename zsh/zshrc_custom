# ~/dotfiles/zsh/zshrc_custom

# Restaurer le PATH original si n√©cessaire
if [ -n "$PATH_ORIGINAL" ]; then
	export PATH=$PATH_ORIGINAL
fi

DOTFILES_PATH="$HOME/dotfiles/"
DOTFILES_ZSH_PATH="$DOTFILES_PATH/zsh/"
ENV_FILE="$DOTFILES_ZSH_PATH/env.sh"
ALIASES_FILES="$DOTFILES_ZSH_PATH/aliases.zsh"
FUNCTIONS_DIR="$DOTFILES_ZSH_PATH/functions/"

# === Chargement des fonctions ===
if [ -d "$FUNCTIONS_DIR" ]; then
    for func_file in "$FUNCTIONS_DIR"/**/*.sh; do
        if [ -f "$func_file" ]; then
            source "$func_file" && echo "‚úîÔ∏è Charg√© : $func_file" || echo "‚ùå Erreur de chargement : $func_file"
        fi
    done
else
    echo "‚ö†Ô∏è R√©pertoire de fonctions introuvable : $FUNCTIONS_DIR"
fi

backup_dotfiles() {
	echo "üìÅ Sauvegarde manuelle des dotfiles..."
	~/auto_backup_dotfiles.sh
	echo "‚úÖ Sauvegarde termin√©e."
}

# === Environments ===
if [ -f "$ENV_FILE" ]; then
    source "$ENV_FILE"
else
    echo "‚ö†Ô∏è Fichier $ENV_FILE introuvable."
fi

# === Chargement des alias ===
if [ -f "$ALIASES_FILES" ]; then
    source "$ALIASES_FILES"
else
    echo "‚ö†Ô∏è Fichier $ALIASES_FILES introuvable."
fi

# Nettoyage des doublons dans le PATH
if type clean_path &> /dev/null; then
    clean_path
else
    echo "‚ùå La fonction clean_path n'est pas disponible."
fi

alias build_run='cd ~/Documents/Projects/Perso/CPP/weedlyweb && rm -rf build && mkdir build && cd build && cmake .. && make -j$(nproc) && ./WeedlyWeb'

neofetch
