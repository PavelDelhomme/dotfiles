version: '3.8'

services:
  dotfiles-test:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: dotfiles-test-container
    image: dotfiles-test-image:latest
    stdin_open: true
    tty: true
    volumes:
      # Monter les dotfiles pour développement
      - .:/root/dotfiles:ro
      # Permettre la persistance des configurations (volumes isolés avec préfixe)
      - dotfiles-test-config:/root/.config
      - dotfiles-test-ssh:/root/.ssh
    environment:
      - HOME=/root
      - DOTFILES_DIR=/root/dotfiles
      - TERM=xterm-256color
    command: /bin/zsh
    networks:
      - dotfiles-test-network

volumes:
  dotfiles-test-config:
    driver: local
  dotfiles-test-ssh:
    driver: local

networks:
  dotfiles-test-network:
    driver: bridge

